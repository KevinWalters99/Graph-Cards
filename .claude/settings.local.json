{
  "permissions": {
    "allow": [
      "Bash(python3:*)",
      "Bash(\"/c/Users/walters/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport csv\nwith open\\(''a:/PRIVATE_WORKING/Graph-Cards/docs/december_15_december_21_2025_earnings.csv'', ''r'', encoding=''utf-8''\\) as f:\n    reader = csv.reader\\(f\\)\n    header = next\\(reader\\)\n    for i, h in enumerate\\(header\\):\n        print\\(f''{i}: {h}''\\)\n\")",
      "Bash(\"/c/Users/walters/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport csv\n\nwith open\\(''a:/PRIVATE_WORKING/Graph-Cards/docs/december_15_december_21_2025_earnings.csv'', ''r'', encoding=''utf-8''\\) as f:\n    reader = csv.reader\\(f\\)\n    header = next\\(reader\\)\n    rows = list\\(reader\\)\n\nprint\\(f''Total data rows: {len\\(rows\\)}''\\)\nprint\\(f''Total columns: {len\\(header\\)}''\\)\nprint\\(\\)\n\n# Check distinct values for key categorical columns\ncat_cols = {\n    ''TRANSACTION_TYPE'': 5,\n    ''BUY_FORMAT'': 11,\n    ''SALE_TYPE'': 12,\n    ''PRODUCT_CATEGORY'': 10,\n    ''TRANSACTION_CURRENCY'': 22,\n    ''BUYER_COUNTRY'': 20,\n}\n\nfor name, idx in cat_cols.items\\(\\):\n    vals = set\\(\\)\n    for row in rows:\n        if idx < len\\(row\\):\n            vals.add\\(row[idx]\\)\n    print\\(f''{name} \\(col {idx}\\) - {len\\(vals\\)} distinct values:''\\)\n    for v in sorted\\(vals\\):\n        print\\(f''  \"\"{v}\"\"''\\)\n    print\\(\\)\n\")",
      "Bash(\"/c/Users/walters/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport csv\n\nwith open\\(''a:/PRIVATE_WORKING/Graph-Cards/docs/december_15_december_21_2025_earnings.csv'', ''r'', encoding=''utf-8''\\) as f:\n    reader = csv.reader\\(f\\)\n    header = next\\(reader\\)\n    rows = list\\(reader\\)\n\n# Check ORDER_ID uniqueness\norder_ids = [row[7] for row in rows]\nunique_ids = set\\(order_ids\\)\nprint\\(f''Total rows: {len\\(order_ids\\)}''\\)\nprint\\(f''Unique ORDER_IDs: {len\\(unique_ids\\)}''\\)\nprint\\(f''Duplicate ORDER_IDs: {len\\(order_ids\\) - len\\(unique_ids\\)}''\\)\nprint\\(\\)\n\n# Find which ORDER_IDs are duplicated\nfrom collections import Counter\nid_counts = Counter\\(order_ids\\)\ndups = {k: v for k, v in id_counts.items\\(\\) if v > 1}\nprint\\(f''Number of ORDER_IDs that appear more than once: {len\\(dups\\)}''\\)\nif dups:\n    print\\(''Sample duplicates \\(up to 10\\):''\\)\n    for k, v in sorted\\(dups.items\\(\\), key=lambda x: -x[1]\\)[:10]:\n        print\\(f''  ORDER_ID={k}: {v} occurrences''\\)\n\")",
      "Bash(\"/c/Users/walters/AppData/Local/Programs/Python/Python312/python.exe\" -c:*)",
      "Bash(\"/c/Users/walters/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport csv, sys, io\nsys.stdout = io.TextIOWrapper\\(sys.stdout.buffer, encoding=''utf-8''\\)\n\nwith open\\(''a:/PRIVATE_WORKING/Graph-Cards/docs/december_15_december_21_2025_earnings.csv'', ''r'', encoding=''utf-8''\\) as f:\n    reader = csv.reader\\(f\\)\n    header = next\\(reader\\)\n    rows = list\\(reader\\)\n\n# BUYER_STATE distinct values\nstates = set\\(\\)\nfor row in rows:\n    if row[19].strip\\(\\):\n        states.add\\(row[19]\\)\nprint\\(f''BUYER_STATE - {len\\(states\\)} distinct values:''\\)\nprint\\(sorted\\(states\\)\\)\nprint\\(\\)\n\n# LIVESTREAM_TITLE distinct values\ntitles = set\\(\\)\nfor row in rows:\n    titles.add\\(row[17]\\)\nprint\\(f''LIVESTREAM_TITLE - {len\\(titles\\)} distinct values:''\\)\nfor t in sorted\\(titles\\):\n    print\\(f''  \"\"{t}\"\"''\\)\nprint\\(\\)\n\n# LISTING_DESCRIPTION distinct values\ndescs = set\\(\\)\nfor row in rows:\n    descs.add\\(row[9]\\)\nprint\\(f''LISTING_DESCRIPTION - {len\\(descs\\)} distinct values:''\\)\nfor d in sorted\\(descs\\):\n    print\\(f''  \"\"{d}\"\"''\\)\nprint\\(\\)\n\n# Count by TRANSACTION_TYPE\nfrom collections import Counter\ntt_counts = Counter\\(row[5] for row in rows\\)\nprint\\(''TRANSACTION_TYPE counts:''\\)\nfor k, v in tt_counts.most_common\\(\\):\n    print\\(f''  {k}: {v}''\\)\nprint\\(\\)\n\n# Count by BUY_FORMAT  \nbf_counts = Counter\\(row[11] for row in rows\\)\nprint\\(''BUY_FORMAT counts:''\\)\nfor k, v in bf_counts.most_common\\(\\):\n    print\\(f''  \"\"{k}\"\": {v}''\\)\nprint\\(\\)\n\n# Count by LISTING_DESCRIPTION\nld_counts = Counter\\(row[9] for row in rows\\)\nprint\\(''LISTING_DESCRIPTION counts:''\\)\nfor k, v in ld_counts.most_common\\(\\):\n    print\\(f''  \"\"{k}\"\": {v}''\\)\n\")",
      "Bash(pip install:*)",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -c:*)",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" ebay_email_poc.py)",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" ebay_import.py --dry-run)",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -c \"\nimport pymysql\n\nconn = pymysql.connect\\(host=''192.168.0.215'', port=3307, user=''cg_app'', password=''ACe!sysD#0kVnBWF'', database=''card_graph'', charset=''utf8mb4''\\)\ncur = conn.cursor\\(\\)\n\n# Check dcsports87 orders\ncur.execute\\(\"\"\"\"\"\"\n    SELECT o.ebay_order_id, o.order_number, o.order_date, o.total_amount, o.source,\n           \\(SELECT COUNT\\(*\\) FROM CG_EbayOrderItems i WHERE i.ebay_order_id = o.ebay_order_id\\) as item_count\n    FROM CG_EbayOrders o\n    WHERE o.seller_buyer_name = ''dcsports87''\n    ORDER BY o.order_date DESC\n\"\"\"\"\"\"\\)\nrows = cur.fetchall\\(\\)\nprint\\(''dcsports87 orders:'', len\\(rows\\)\\)\nfor r in rows:\n    print\\(''  ID:%d  #%s  %s  $%.2f  src=%s  items=%d'' % \\(r[0], r[1][:30], str\\(r[2]\\)[:10], r[3], r[4] or ''ebay_confirmed'', r[5]\\)\\)\n\n# Check all items for dcsports87 orders\nprint\\(\\)\nfor r in rows:\n    oid = r[0]\n    cur.execute\\(''SELECT item_title, item_price FROM CG_EbayOrderItems WHERE ebay_order_id = %s'', \\(oid,\\)\\)\n    items = cur.fetchall\\(\\)\n    safe_title = \\(items[0][0] or ''''\\).encode\\(''ascii'', errors=''replace''\\).decode\\(''ascii''\\) if items else ''?''\n    print\\(''Order #%s \\(%d items\\): first=%s'' % \\(r[1][:25], len\\(items\\), safe_title[:60]\\)\\)\n\n# Also check: what''s the max item_count per order in the DB?\nprint\\(\\)\ncur.execute\\(\"\"\"\"\"\"\n    SELECT o.order_number, o.seller_buyer_name, COUNT\\(*\\) as cnt\n    FROM CG_EbayOrders o\n    JOIN CG_EbayOrderItems i ON i.ebay_order_id = o.ebay_order_id\n    GROUP BY o.ebay_order_id\n    ORDER BY cnt DESC\n    LIMIT 10\n\"\"\"\"\"\"\\)\nfor r in cur.fetchall\\(\\):\n    safe = \\(r[1] or ''''\\).encode\\(''ascii'', errors=''replace''\\).decode\\(''ascii''\\)\n    print\\(''Top items: #%s  seller=%s  items=%d'' % \\(r[0][:25], safe[:25], r[2]\\)\\)\n\nconn.close\\(\\)\n\")",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -c \"\nimport imaplib, email\nfrom email.header import decode_header\n\nIMAP_HOST = ''imap.mail.yahoo.com''\nIMAP_PORT = 993\n\nmail = imaplib.IMAP4_SSL\\(IMAP_HOST, IMAP_PORT\\)\nmail.login\\(''collinwalters123@yahoo.com'', ''pjnpsukyleqttwoq''\\)\nmail.select\\(''Inbox''\\)\n\n# Search for a dcsports87 order confirmed email\nstatus, data = mail.search\\(None, ''\\(FROM \"\"ebay@ebay.com\"\" SUBJECT \"\"order confirmed\"\"\\)''\\)\nids = data[0].split\\(\\) if data[0] else []\nprint\\(''Order confirmed emails:'', len\\(ids\\)\\)\n\n# Find one from dcsports87\nfor eid in ids[-10:]:\n    status2, data2 = mail.fetch\\(eid, ''\\(BODY.PEEK[HEADER.FIELDS \\(SUBJECT\\)]\\)''\\)\n    raw = data2[0][1]\n    msg = email.message_from_bytes\\(raw\\)\n    subj = msg.get\\(''Subject'',''''\\)\n    decoded = decode_header\\(subj\\)\n    result = ''''\n    for part, enc in decoded:\n        if isinstance\\(part, bytes\\):\n            result += part.decode\\(enc or ''utf-8'', errors=''replace''\\)\n        else:\n            result += part\n    safe = result.encode\\(''ascii'', errors=''replace''\\).decode\\(''ascii''\\)\n    print\\(''  %s: %s'' % \\(eid.decode\\(\\), safe[:80]\\)\\)\n\nmail.logout\\(\\)\n\")",
      "Bash(curl:*)",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -c \"\nimport pymysql\nconn = pymysql.connect\\(host=''192.168.0.215'', port=3307, user=''cg_app'', password=''ACe!sysD#0kVnBWF'', database=''card_graph''\\)\ncursor = conn.cursor\\(\\)\n\n# Find PayPal eBay orders that match eBay confirmed orders by amount and date\ncursor.execute\\(''''''\n    SELECT p.ebay_order_id, p.order_number, p.total_amount, p.order_date,\n           e.ebay_order_id, e.order_number, e.total_amount, e.order_date\n    FROM CG_EbayOrders p\n    JOIN CG_EbayOrders e ON ABS\\(p.total_amount - e.total_amount\\) < 0.02\n                         AND DATE\\(p.order_date\\) = DATE\\(e.order_date\\)\n                         AND e.source = ''ebay_confirmed''\n    WHERE p.source = ''paypal_ebay''\n    ORDER BY p.total_amount DESC\n''''''\\)\nmatches = cursor.fetchall\\(\\)\nprint\\(''Duplicate matches \\(PayPal eBay -> eBay confirmed\\):''\\)\nprint\\(''  %-6s %-30s %10s | %-6s %-25s %10s'' % \\(''PP_ID'', ''PP Order#'', ''PP Total'', ''EB_ID'', ''EB Order#'', ''EB Total''\\)\\)\nfor m in matches:\n    pp_num = \\(m[1] or ''''\\)[:28]\n    eb_num = \\(m[5] or ''''\\)[:23]\n    print\\(''  %-6d %-30s $%9.2f | %-6d %-25s $%9.2f'' % \\(m[0], pp_num, m[2], m[4], eb_num, m[6]\\)\\)\nprint\\(''Total duplicates: %d'' % len\\(matches\\)\\)\n\ncursor.close\\(\\)\nconn.close\\(\\)\n\")",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -c \"\nimport imaplib\n\nmail = imaplib.IMAP4_SSL\\(''imap.mail.yahoo.com'', 993\\)\nmail.login\\(''collinwalters123@yahoo.com'', ''pjnpsukyleqttwoq''\\)\nmail.select\\(''Inbox''\\)\n\n# Count all eBay order emails\nstatus, data = mail.search\\(None, ''\\(FROM \"\"ebay@ebay.com\"\" SUBJECT \"\"order confirmed\"\"\\)''\\)\nids1 = data[0].split\\(\\) if data[0] else []\n\nstatus, data = mail.search\\(None, ''\\(FROM \"\"ebay@ebay.com\"\" SUBJECT \"\"Your order is confirmed\"\"\\)''\\)\nids2 = data[0].split\\(\\) if data[0] else []\n\nstatus, data = mail.search\\(None, ''\\(FROM \"\"service@paypal.com\"\"\\)''\\)\npp_ids = data[0].split\\(\\) if data[0] else []\n\nstatus, data = mail.search\\(None, ''\\(FROM \"\"ebay@ebay.com\"\"\\)''\\)\nall_ebay = data[0].split\\(\\) if data[0] else []\n\nprint\\(''Inbox email counts:''\\)\nprint\\(''  eBay order confirmed: %d'' % len\\(ids1\\)\\)\nprint\\(''  eBay order is confirmed: %d'' % len\\(ids2\\)\\)\nprint\\(''  All PayPal: %d'' % len\\(pp_ids\\)\\)\nprint\\(''  All eBay: %d'' % len\\(all_ebay\\)\\)\n\n# Check what folders exist\nstatus, folders = mail.list\\(\\)\nprint\\(''\\\\nAll folders:''\\)\nfor f in folders:\n    decoded = f.decode\\(\\) if isinstance\\(f, bytes\\) else str\\(f\\)\n    print\\(''  '' + decoded\\)\n\nmail.logout\\(\\)\n\")",
      "Bash(\"C:\\\\Users\\\\walters\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python312\\\\python.exe\" -u ebay_import.py --no-move --phase 4)"
    ]
  }
}
